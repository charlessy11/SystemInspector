<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>System Inspector: Project 1: System Inspector</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">System Inspector
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Project 1: System Inspector </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> See: <a href="https://www.cs.usfca.edu/~mmalensek/cs326/assignments/project-1.html">https://www.cs.usfca.edu/~mmalensek/cs326/assignments/project-1.html</a></p>
<p><b>About This Program:</b></p>
<p>The System Inspector Program implements a Unix utility that inspects the system it runs on and displays a summary of useful information of the system to the user. It behaves somewhat similar to the <code>top</code> command found in many Unix-like operating systems which is used to show the Linux processes. Similarly, the two provide a dynamic real-time view of the running system.</p>
<p><b>How It Works:</b></p>
<p>The program displays a summary of useful information of the system by reading the contents of <code>\proc</code>.</p>
<p><b>How It's Built:</b></p>
<p>Here is a list of methods that reads the different contents of <code>\proc</code>:</p>
<ul>
<li>Load average every one, five, and fifteen minutes: `struct <a class="el" href="structload__avg.html">load_avg</a> { double one; double five; double fifteen; };`</li>
<li>CPU information to check cpu usage: `struct <a class="el" href="structcpu__stats.html">cpu_stats</a> { long idle; long total; };`</li>
<li>Memory information to check memory usage: `struct <a class="el" href="structmem__stats.html">mem_stats</a> { double used; double total; };`</li>
<li>Task statistics: `struct <a class="el" href="structtask__stats.html">task_stats</a> { unsigned int total; unsigned int running; unsigned int waiting; unsigned int sleeping; unsigned int stopped; unsigned int zombie; struct <a class="el" href="structtask__info.html">task_info</a> *active_tasks; };`</li>
<li>Task information: `struct <a class="el" href="structtask__info.html">task_info</a> { pid_t pid; uid_t uid; char name[26]; char state[13]; };`</li>
<li>Retrieves hostname of the machine: <code>int <a class="el" href="procfs_8h.html#acb1112f87eb6d7023b4bc2adccebb75e">pfs_hostname(char *proc_dir, char *hostname_buf, size_t buf_sz)</a>;</code></li>
<li>Retrieves kernel version of the machine: <code>int <a class="el" href="procfs_8h.html#aa2daa2378b2816f378f7d8d1cad39371">pfs_kernel_version(char *proc_dir, char *version_buf, size_t buf_sz)</a>;</code></li>
<li>Retrieves cpu model name of the machine: <code>int <a class="el" href="procfs_8h.html#aa9d05ac622f7322719bbcf8302c682ad">pfs_cpu_model(char *proc_dir, char *model_buf, size_t buf_sz)</a>;</code></li>
<li>Sums up the number of processing units of the machine: <code>int <a class="el" href="procfs_8h.html#a9b207290dee3e4fc725a6800ab2813d6">pfs_cpu_units(char *proc_dir)</a>;</code></li>
<li>Retrieves uptime(in seconds) of the machine: <code>double <a class="el" href="procfs_8h.html#a22f70e07728198887b6f062716183058">pfs_uptime(char *proc_dir)</a>;</code></li>
<li>Formats uptime(in seconds) to days, hours, minutes, and seconds: <code>int <a class="el" href="procfs_8h.html#a2b539d023054cb32a82cc19e9fe1d977">pfs_format_uptime(double time, char *uptime_buf)</a>;</code></li>
<li>Retrieves load average of the machine: <code>struct <a class="el" href="structload__avg.html">load_avg</a> <a class="el" href="procfs_8h.html#ad7cd36585e7dc0dd239d622c60e1df69">pfs_load_avg(char *proc_dir)</a>;</code></li>
<li>Retrieves cpu usage of the machine: <code>double <a class="el" href="procfs_8h.html#a866cac2f8014b4c83f23243ab0e01ab3">pfs_cpu_usage(char *procfs_dir, struct cpu_stats *prev, struct cpu_stats *curr)</a>;</code></li>
<li>Retrieves memory usage of the machine: <code>struct <a class="el" href="structmem__stats.html">mem_stats</a> <a class="el" href="procfs_8h.html#a6cde96a5ca78eb0d37fb4c8da3c7e0b4">pfs_mem_usage(char *procfs_dir)</a>;</code></li>
<li>Creates memory for <a class="el" href="structtask__stats.html">task_stats</a> structs: <code>struct <a class="el" href="structtask__stats.html">task_stats</a> *pfs_create_tstats();</code></li>
<li>Frees memory for <a class="el" href="structtask__stats.html">task_stats</a> structs: <code>void <a class="el" href="procfs_8h.html#ace1568af21fee77d1ce8b68ac7460e8c">pfs_destroy_tstats(struct task_stats *tstats)</a>;</code></li>
<li>Retrieves tasks info of the machine: <code>int <a class="el" href="procfs_8h.html#a78c77e940f997164cfe044717b5ce2e1">pfs_tasks(char *proc_dir, struct task_stats *tstats)</a>;</code></li>
</ul>
<p>Here is a list of helper methods:</p>
<ul>
<li>Opens specified path: <code>int open_path(char *proc_dir, char *path);</code></li>
<li>Reads one line of file: <code>ssize_t one_lineread(int fd, char *buf, size_t sz, char *delim);</code></li>
<li>Reads a file line by line: <code>ssize_t lineread(int fd, char *buf, size_t sz);</code></li>
<li>Tokenize string: <code>char *next_token(char **str_ptr, const char *delim);</code></li>
<li>Draws percentage bar: <code>void draw_percbar(char *buf, double frac);</code></li>
<li>Maps ID numbers (UID) associated with running processes to corresponding username: <code>void uid_to_uname(char *name_buf, uid_t uid);</code></li>
</ul>
<p>To compile and run:</p>
<div class="fragment"><div class="line">make</div>
<div class="line">./inspector</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1"></a>
Testing</h1>
<p>To execute the test cases, use <code>make test</code>. To pull in updated test cases, run <code>make testupdate</code>. You can also run a specific test case instead of all of them:</p>
<div class="fragment"><div class="line"># Run all test cases:</div>
<div class="line">make test</div>
<div class="line"> </div>
<div class="line"># Run a specific test case:</div>
<div class="line">make test run=4</div>
<div class="line"> </div>
<div class="line"># Run a few specific test cases (4, 8, and 12 in this case):</div>
<div class="line">make test run=&#39;4 8 12&#39;</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
